<% content_for :page_header do %>
  <h2 class="page-title">
    <% if params[:boat] %>
      Convicts on boat <%= params[:boat] %>
    <% elsif params[:destination] %>
      Convicts going to <%= params[:destination] %>
    <% elsif params[:departure_year] %>
      Convicts departing <%= params[:departure_year] %>
    <% elsif params[:court_county] %>
      Convicts convicted near <%= params[:court_county] %>
    <% else %>
      Convicts
    <% end %>
  </h2>
<% end %>

<% unless @convicts.empty? %>

  <%= will_paginate @convicts %>

  <div id="convicts-table"></div>

  <script>
    YUI({ filter: 'raw' }).use("datatable-base", function (Y) {
      var columns = ["name","boat", "departure_date", "court", "destination", "term"];
      var tableData = <%= raw @convicts.to_json %>;

      datatable = new Y.DataTable.Base({columnset:columns, recordset:tableData, summary:"Convicts"}).render("#convicts-table");
    });
  </script>

  <%= will_paginate @convicts %>
<% else %>
  <p>No convicts</p>
<% end %>
